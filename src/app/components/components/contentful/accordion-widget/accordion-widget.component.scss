@use "_v3/calc" as *;

$icon-offset-x: 1rem !default;

:host {
  width: 100%;

  ::ng-deep {
    .mat-expansion-panel {
      transition: border-top .3s ease;
      
      &.mat-expanded {
        .mat-expansion-panel-header {
          border-bottom: none !important;
          .mat-expansion-panel-header-title {
            font-size: var(--#{$cb}font-size-225) !important;
            line-height: 1.3;
          }
        }
      }

      .mat-expansion-panel-header {
        .mat-expansion-panel-header-title {
          > *, > * > * {
            align-items: baseline;
          }

          ol, ul {
            margin: 0;
          }
        }
      }

      .mat-expansion-panel-body {
        padding-bottom: var(--#{$cb}space-300);

        > div {
          > * {
            margin:0;
            &:not(&:last-child)  {
              margin-top: var(--#{$cb}space-200);
            }
          }
        }
      }
    }

    .list-number {
      font-size: 1.25rem;
      margin: 0 $icon-offset-x * .5 0 0;
      min-width: 2.25rem;
      color: var(--page-color);
      font-weight: var(--#{$cb}font-weight-bold) !important;
    }

    img {
      width: 28px;
      margin-right: 0;
      vertical-align: middle;
      border-radius: 50%;
      background: var(--page-color);
    }

    .mat-expansion-panel-body img {
      border-radius: 0;
      background: transparent;
    }

    // Reset image sizing for image tile widgets inside accordion
    lilly-content-image-tile-widget {
      img {
        width: auto !important;
        height: auto !important;
        margin-right: 0;
        vertical-align: middle;
        border-radius: 0;
        background: transparent;
      }
    }

    .is-first-image img:first-child {
      width: 46px;
      margin-right: $icon-offset-x;
    }
  }
}

@include media-breakpoint-down(sm) {
  :host {
    ::ng-deep {
      .mat-expansion-panel {
        .mat-expansion-panel-header {
          .mat-expansion-panel-header-title {
            font-size: var(--#{$cb}font-size-125);
          }
        }

        &.mat-expanded {
          .mat-expansion-panel-header {
            .mat-expansion-panel-header-title {
              font-size: var(--#{$cb}font-size-175) !important;
              line-height: 1.3;
            }
          }
        }
      }

      .mat-expanded {
        .mat-expansion-panel-body {
          font-size: var(--#{$cb}font-size-base);
        }
      }

      .list-number {
        font-size: 1.4rem;
      }
    }
  }
}
