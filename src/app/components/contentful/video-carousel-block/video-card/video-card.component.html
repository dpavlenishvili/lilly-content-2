<!-- video-card.component.html -->
@if (video()) {
  <div
    class="video-card"
    tabindex="0"
    role="button"
    [attr.aria-label]="video()?.fields?.title">

    @if (!isPlaying()) {
      <!-- Show thumbnail when NOT playing -->
      <img
        class="video-card__image"
        [src]="video()?.fields?.thumbnail?.fields?.file?.url"
        [alt]="video()?.fields?.title"
        loading="lazy"
        decoding="async"/>
    } @else {
      <!-- Show video player when playing -->
      <lilly-media-content
        [mediaType]="video().fields?.video?.fields?.displayMedia"
        [mediaId]="mediaId()"
        [uiConfigId]="uiConfigId()"
        [subsiteName]="video().fields?.categoryLabel"
        [title]="video().fields?.title"
        [videoConfig]="video().fields?.video?.fields?.videoConfig"
      ></lilly-media-content>
    }

    <div class="video-card__category">{{ video()?.fields?.categoryLabel }}</div>

    <div class="video-card__footer">
      <div class="video-card__title">
        @if (video()?.fields?.icon?.fields?.file?.url) {
          <img
            class="video-card__icon"
            [src]="video()?.fields?.icon?.fields?.file?.url"
            [alt]="video()?.fields?.icon?.fields?.description"
            loading="lazy"/>
        }
        <span>{{ video()?.fields?.title }}</span>
      </div>

      <button
        class="video-card__play-btn"
        (click)="togglePlay($event)"
        [attr.aria-label]="isPlaying() ? 'Pause video' : 'Play video'">
        <mat-icon [svgIcon]="isPlaying() ? 'pause' : 'play'"></mat-icon>
      </button>
    </div>
  </div>
}
